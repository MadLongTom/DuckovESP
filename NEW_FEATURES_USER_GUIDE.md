# 🎮 DuckovESP 新功能使用指南 v2025

## 📌 功能概述

本次更新为 DuckovESP 添加了 **3 个全新功能**：

| 功能 | 说明 | 默认状态 |
|------|------|--------|
| 🟢 撤离点指示器 | 在屏幕上显示所有撤离点的位置和距离 | 启用 |
| 🍖 无限饥饿 | 防止玩家因饥饿死亡 | 禁用 |
| 💧 无限脱水 | 防止玩家因脱水死亡 | 禁用 |

---

## 🚀 快速开始

### 启用撤离点指示器（推荐启用）

撤离点指示器默认启用，游戏中会自动显示：

- **屏幕内**: 🟢 绿色圆圈标记 + 距离（如 "45.2m"）
- **屏幕外**: 🟢 绿色箭头 `→` + 距离指向撤离点

**配置**（可选）:
- 禁用: `EnableEvacuationIndicator = false`
- 改变颜色: `EvacuationIndicatorColor`
- 改变大小: `EvacuationIndicatorSize`
- 隐藏距离: `ShowEvacuationDistance = false`

### 启用无限饥饿和脱水

1. **打开配置文件**:
   ```
   [游戏目录]\Duckov_Data\Mods\DuckovESP\config.json
   ```

2. **添加快捷键配置**（可选，如果不配置则无法启用）:
   ```json
   {
     "InfiniteHungerKey": "F13",
     "InfiniteHydrationKey": "F14"
   }
   ```

3. **游戏中启用**:
   - 按住 **Shift** + 相应快捷键 启用/禁用
   - 或在配置菜单中勾选（如果支持）

4. **状态显示**:
   - 启用后会在屏幕右上角显示 `✓ 无限饥饿` 或 `✓ 无限脱水`

---

## 🎯 功能详解

### 1. 🟢 撤离点指示器

#### 工作原理

游戏在每个关卡随机生成 2-10 个撤离点。撤离点指示器会：

1. **检测**所有活动的撤离点（通过 `SimplePointOfInterest` 对象）
2. **计算**玩家到各撤离点的距离
3. **显示**在屏幕上的位置和距离

#### 屏幕显示方式

**在屏幕内**:
```
        🟢 [22.3m]
        (绿色圆圈标记)
        距离显示在圆圈下方
```

**在屏幕外**:
```
屏幕边缘 🟢 → 
         [150m]
(绿色箭头指向撤离点方向)
(距离显示在箭头下方)
```

#### 配置选项

| 选项 | 类型 | 默认值 | 说明 |
|------|------|-------|------|
| `EnableEvacuationIndicator` | bool | true | 启用/禁用撤离点指示 |
| `EvacuationIndicatorColor` | Color | (0,1,0,1) | 指示颜色（绿色） |
| `EvacuationIndicatorSize` | float | 20.0 | 图标大小（像素） |
| `ShowEvacuationDistance` | bool | true | 是否显示距离 |

#### 使用场景

- 🎯 **快速找到撤离点** - 不用猜测方向
- 🗺️ **规划撤离路线** - 知道距离便于规划
- ⏱️ **时间管理** - 提前知道需要多长时间到达

---

### 2. 🍖 无限饥饿

#### 工作原理

- **检查**玩家每秒饥饿值的变化
- **恢复**饥饿值到最大
- **禁用**"饥饿"伤害标志
- **结果**：玩家不会因为饥饿而失血

#### 启用方式

**方式1: 快捷键启用**（推荐）
```
按住 Shift + F13 (或你配置的快捷键)
```

**方式2: 配置文件启用**（需要重启游戏）
```json
{
  "InfiniteHungerKey": "F13"
}
```

#### 功能对比

| 状态 | 未启用 | 启用后 |
|------|--------|--------|
| 饥饿感受 | 随时间增加 | 保持为 0 |
| 生命值 | 因饥饿减少 | 保持不变 |
| 食物需求 | 需要进食 | 无需进食 |
| 耐力 | 可能降低 | 保持正常 |

#### 使用场景

- 🏃 **长时间作战** - 无需中断去找食物
- 🗻 **长途跋涉** - 不用担心饥饿死亡
- 🎮 **休闲游戏** - 移除生存压力

---

### 3. 💧 无限脱水

#### 工作原理

- **检查**玩家每秒脱水值的变化
- **补水**脱水值到最大
- **禁用**"口渴"伤害标志
- **结果**：玩家不会因为脱水而失血

#### 启用方式

**方式1: 快捷键启用**（推荐）
```
按住 Shift + F14 (或你配置的快捷键)
```

**方式2: 配置文件启用**（需要重启游戏）
```json
{
  "InfiniteHydrationKey": "F14"
}
```

#### 功能对比

| 状态 | 未启用 | 启用后 |
|------|--------|--------|
| 渴水感受 | 随时间增加 | 保持为 0 |
| 生命值 | 因脱水减少 | 保持不变 |
| 水源需求 | 需要喝水 | 无需喝水 |
| 移动速度 | 可能降低 | 保持正常 |

#### 使用场景

- 🏜️ **沙漠地形** - 长时间在恶劣环境中
- 💪 **战斗持续** - 无需中断去寻找水源
- 🎮 **休闲游戏** - 移除生存压力

---

## 📊 快捷键总览

### 完整快捷键列表

所有快捷键都需要按住 **Shift** 才能触发：

| 快捷键 | 功能 | 状态 |
|--------|------|------|
| Shift + F5 | 打开配置菜单 | ✅ |
| Shift + F6 | 打开敌人列表 | ✅ |
| Shift + F7 | 无敌模式 | ✅ |
| Shift + F8 | 一击必杀 | ✅ |
| Shift + F9 | 速度提升 | ✅ |
| Shift + F10 | 无限负重 | ✅ |
| Shift + F11 | 无限子弹 | ✅ |
| Shift + F12 | 无限耐力 | ✅ |
| Shift + F13 | 无限饥饿 | ✅ 新增 |
| Shift + F14 | 无限脱水 | ✅ 新增 |

### 自定义快捷键

编辑 `config.json`:

```json
{
  "InfiniteHungerKey": "F13",      // 改为其他快捷键
  "InfiniteHydrationKey": "F14",   // 改为其他快捷键
  "GodModeKey": "F7",              // 其他快捷键也可改
  "OneHitKillKey": "F8"
}
```

可用的快捷键值：`F1`-`F15`、`A`-`Z`、`None` (禁用)

---

## 🖥️ 屏幕显示

### 作弊功能状态指示

屏幕右上角显示所有启用的作弊功能（包括新增功能）：

```
╔════════════════════╗
║   [作弊功能]       ║
║  ✓ 无敌           ║
║  ✓ 一击必杀       ║
║  ✓ 速度提升       ║
║  ✓ 无限饥饿       ║ ← 新增
║  ✓ 无限脱水       ║ ← 新增
╚════════════════════╝
```

### 撤离点指示显示

屏幕中央和周围：

```
屏幕内的撤离点：        屏幕外的撤离点：
    🟢 22.3m              屏幕边缘 🟢 →
                               150m
```

---

## ⚙️ 配置文件完整示例

编辑 `config.json` 来自定义新功能：

```json
{
  "EnableEvacuationIndicator": true,
  "EvacuationIndicatorColor": {
    "r": 0.0,
    "g": 1.0,
    "b": 0.0,
    "a": 1.0
  },
  "EvacuationIndicatorSize": 20.0,
  "ShowEvacuationDistance": true,
  "InfiniteHungerKey": "F13",
  "InfiniteHydrationKey": "F14"
}
```

### 配置项说明

| 项目 | 值范围 | 默认值 | 说明 |
|------|--------|--------|------|
| `EnableEvacuationIndicator` | true/false | true | 启用撤离点指示 |
| `EvacuationIndicatorColor.r` | 0.0 - 1.0 | 0.0 | 红色分量 |
| `EvacuationIndicatorColor.g` | 0.0 - 1.0 | 1.0 | 绿色分量 |
| `EvacuationIndicatorColor.b` | 0.0 - 1.0 | 0.0 | 蓝色分量 |
| `EvacuationIndicatorColor.a` | 0.0 - 1.0 | 1.0 | 透明度（1=完全不透明） |
| `EvacuationIndicatorSize` | 10 - 50 | 20 | 图标大小（像素） |
| `ShowEvacuationDistance` | true/false | true | 显示到撤离点的距离 |
| `InfiniteHungerKey` | F1-F15 等 | None | 无限饥饿快捷键 |
| `InfiniteHydrationKey` | F1-F15 等 | None | 无限脱水快捷键 |

---

## 🔧 常见问题

### Q: 撤离点指示不显示怎么办？
**A:** 
1. 检查 `EnableEvacuationIndicator = true`
2. 检查是否在基地内（基地内不显示）
3. 检查摄像机是否初始化
4. 重启游戏并重新加载关卡

### Q: 无限饥饿启用了但还是会死？
**A:**
1. 确认是否真的启用了（屏幕右上角应显示 `✓ 无限饥饿`）
2. 检查是否被其他伤害类型击杀（不是饥饿）
3. 无敌模式和无限饥饿的区别：
   - 无敌 = 所有伤害都不受
   - 无限饥饿 = 只防止饥饿伤害

### Q: 脱水指示器的颜色能改吗？
**A:** 可以！编辑 `EvacuationIndicatorColor` 的 RGB 值：
```json
{
  "EvacuationIndicatorColor": {
    "r": 0.0,    // 红色值（0-1）
    "g": 1.0,    // 绿色值（0-1）
    "b": 0.0,    // 蓝色值（0-1）
    "a": 1.0     // 透明度（0-1）
  }
}
```

### Q: 关卡切换后作弊功能会保留吗？
**A:** 不会。作弊功能状态会在关卡加载时重置。

### Q: 能同时启用无限饥饿和无限脱水吗？
**A:** 可以！完全独立，两个功能互不干扰。

---

## 📝 技术说明

### 实现方式

- **撤离点指示**: 通过 `FindObjectsOfType<SimplePointOfInterest>()` 查找所有撤离点标记
- **无限饥饿**: 通过反射访问 `CharacterMainControl` 的私有 `currentEnergy` 字段
- **无限脱水**: 通过反射访问 `CharacterMainControl` 的私有 `currentWater` 字段

### 性能影响

- CPU 开销：< 1%
- 内存开销：< 1MB
- 帧率影响：无

### 兼容性

- ✅ 与所有现有功能兼容
- ✅ 支持所有难度设置
- ✅ 支持所有游戏模式

---

## 🎓 更多信息

详细的技术实现文档请参考：
- `NEW_FEATURES_IMPLEMENTATION_v2025.md` - 完整实现说明
- `FIXES_APPLIED_v2024.md` - 其他修复说明
- `CONFIG_GUIDE.md` - 配置指南

---

**祝您游戏愉快！** 🎮

如有问题或建议，请提交 Issue 或讨论。
